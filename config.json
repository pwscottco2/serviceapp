{"icon":"other","splash":"other","splashdata":{"bg":"#ffffff","img":"scottco.png"},"settings":{"router":{"mode":"intelligent","animation":"off"},"theme":"","push-notifications":{"android":{"enabled":false},"ios":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"loading-message":true,"logging":{"enabled":false,"bufferFrequency":100,"defaultRootLogLevel":"error","defaultMaxFileSizeKilobyte":1000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.1.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-network-information@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.fileimporter@1.0.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.audio@0.9.10":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.media-properties@1.2.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@1.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.logging@1.0.20":{"override":false,"used":true,"enabled":true},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.messaging@0.0.38":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.logging@1.0.23":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.messaging@0.0.41":{"override":false,"used":true,"enabled":true}},"customPlugins":{}},"minimise-on-back-button":true},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"metadata":{"version":"0.4.00","AuthUrl":"http://scottmdm02:616/mdesign/a0A2000000jM0c0EAC/procs/cache.manifest","applicationkey":"ScottCoPayments","description":"Payments processing application","title":"Payments"},"name":"Payments","version":"0.5.00","schemaVersion":22,"pages":[{"name":"Configuration","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_11","type":"content","item-type":"html","_auto_id_":"501913fd-444e-4a65-a293-c0f7fe7205aa","content":"Settings"},{"name":"btnStart","type":"button","item-type":"button","_auto_id_":"eb3eaa11-dc83-45b5-a274-5c3239acb35b","content":"Start","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnValidateConfiguration"},"_auto_id_":"763c19da-879f-4101-b035-46915cc1bb08"}],"right-icon":"fa-play-circle-o"}],"_auto_id_":"e866ad76-dcc3-40c8-9d5a-8d850116f9ba"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"CompanyMode","type":"choice","item-type":"select","_auto_id_":"2298d8ff-c48b-43a2-9b05-e86e6c0c7960","label":"Company","required":false,"options":[{"label":"Scott & Co","value":1},{"label":"AAH","value":2},{"label":"Test / Demonstration","value":3}],"message":"","expressions":{"default":"1"}},{"name":"Username","type":"user-input","item-type":"text","_auto_id_":"e22469a2-712a-48ac-9b4c-a39b0150c83c","label":"Enter your username","required":false,"multiline":false,"debounce":250,"expressions":{},"validators":[],"actions":[]},{"name":"Password","type":"user-input","item-type":"password","_auto_id_":"12ab55c9-63bf-4efc-a774-ab963c73792e","label":"Enter your password","required":false,"left-icon":"fa-lock","message":"This is a required field","expressions":{"show":"$store.pages.Configuration.Username===undefined || $store.Config===undefined || $store.Config.lastUsername === undefined || ($store.pages.Configuration.Username.toLowerCase() != $store.Config.lastUsername.toLowerCase())"},"actions":[],"validators":[]}],"_auto_id_":"2c87fb14-6806-4461-9630-ff56d854d76d"}],"start":false},{"name":"SearchForAction","config":[],"content":[{"name":"static_1","type":"area","item-type":"static","_auto_id_":"5891b649-dc68-47ff-87ae-05bc7261006b","content":[{"name":"image_logo","type":"media","item-type":"image-viewer","_auto_id_":"d29eebbc-4877-4930-99e7-9a1fba918a63","scaleImage":false,"maxWidth":200,"maxHeight":200,"fileName":"scottlogo.png","expressions":{},"classes":"logo"}],"expressions":{}},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"row_search","type":"area","item-type":"row","_auto_id_":"0ade6737-0061-4967-b805-1aa4c73a1c46","content":[{"name":"ActionId","type":"user-input","item-type":"text","_auto_id_":"9da5a66e-dba2-4a1f-8980-e8a1a7f89f25","label":"","required":false,"multiline":false,"debounce":250,"message":"Please ensure you have entered the action number","validators":[],"actions":[],"expressions":{},"placeholder":"Search for action detail number..."},{"name":"btnSearchAction","type":"button","item-type":"button","_auto_id_":"e4004567-db05-43b7-8b09-94354e26d69c","content":"","theme":"minimal","actions":[{"event":"click","type":"call-function","data":{"name":"fnSubmitSearch"},"_auto_id_":"5f28bedd-201b-457d-a43d-ed09414907a9"}],"expressions":{},"right-icon":"fa-search","classes":"iconButton"}],"expressions":{}}],"_auto_id_":"4f4f280b-aaf1-4e15-a799-d1bb8c56bd43","expressions":{},"classes":"nopadding"},{"name":"footer","type":"area","item-type":"button-bar","_auto_id_":"3d4a30b3-6516-41c7-a289-8ad0d8d291a2","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnSettings","type":"button","item-type":"button","_auto_id_":"c647a559-ae93-46e9-9931-6ddc9b215330","content":"Settings...","theme":"minimal","expressions":{},"actions":[{"event":"click","type":"go-to-page","data":{"name":"Settings","isConditional":false},"_auto_id_":"8605523e-141f-4076-a0bb-3d04bf1738bf"}],"left-icon":"fa-gear","classes":"iconButton left"}],"expressions":{}},{"name":"staticContextMenu","type":"area","item-type":"static","_auto_id_":"cdc000a6-447a-435e-b8d8-cc08918eeab7","content":[{"name":"popNeedConfig","type":"component","item-type":"web-component","content":[{"name":"html_13","type":"content","item-type":"html","_auto_id_":"c8eaf408-43bf-4670-bf7a-a8e30292d21b","content":"<h3>Configuration needed...</h3>\n<p>Please enter your username and other relevant details before using the app. Use the \"Settings\" option at the bottom of the screen</p>"},{"name":"button_15","type":"button","item-type":"button","_auto_id_":"9984805a-2b6c-4493-982d-d8fd776ade27","content":"Continue","theme":"default","left-icon":"fa-check","actions":[{"event":"click","type":"call-function","data":{"name":"fnCancelPopup","params":{"popupId":"popNeedConfig"}},"_auto_id_":"a4c10fef-2e8b-4331-8da4-32b5f211ea1b"}],"expressions":{},"classes":"green"}],"componentId":"c04df03e-20ca-4f06-815b-ed42ca534a76","_auto_id_":"a33c5666-a4df-4fbc-8eec-0bd2e07fd0f8","attributes":{"id":"popNeedConfig"},"expressions":{}}],"expressions":{}}],"start":true},{"name":"ActionMessage","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_1","type":"button","item-type":"button","_auto_id_":"ed17a380-ac8d-409f-ac18-58cbd9e098be","content":"","theme":"minimal","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"69126fed-da8c-44c4-bbd7-65ae6aa63f53"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"htmlPageTitle","type":"content","item-type":"html","_auto_id_":"e9c40529-5381-47e2-835e-9c705f09adac","content":"Action Search<p class=\"version\">{{'$store.Config.companyName' | store}}</p>","expressions":{}}],"_auto_id_":"487cbc27-7398-44d8-9766-49e9393e6b03"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"htmlActionMessage","type":"content","item-type":"html","_auto_id_":"61283df7-e07d-4f1c-868b-da89d494eecd","content":"<h4>The requested action is not available</h4><p>Reason: <b>{{'$store.api.ScottCo.getaction.data.reason' | store}}</b></p>","expressions":{}}],"_auto_id_":"0363e08b-e22a-439b-9eaf-163588202050"}],"start":false},{"name":"ConfirmDetails","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"939d78e6-5e00-4c58-a211-298087a0d94f","actions":[{"event":"onload","type":"inline-function","data":{"sync":true,"code":"document.getElementById(\"displayAddress\").innerHTML = cti.store.CurrentAction.fullAddress;\nif ($(\"head script[src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAJ5CO4zuiE1AL_M-uUoioigScCRiUjKoQ&callback=cti.function_init_map']\").length == 0) {\n  var s = document.createElement(\"script\");\n  s.type = \"text/javascript\";\n  s.src = \"https://maps.googleapis.com/maps/api/js?key=AIzaSyAJ5CO4zuiE1AL_M-uUoioigScCRiUjKoQ&callback=cti.function_init_map\";\n\n  // Use any selector\n  s.async = true;\n  s.defer = true;\n  $(\"head\").append(s);\n}\nelse {\n\tcti.function_init_map();\n}"},"_auto_id_":"40bd6b64-ccac-4aed-bcd2-153417d939f0"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_back","type":"button","item-type":"button","_auto_id_":"4f561231-ffd9-4eae-b6fd-96067a3146f6","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"SearchForAction","isConditional":false},"_auto_id_":"7b7cd3ad-d246-40a1-85da-9d2f6329ffc6"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_2","type":"content","item-type":"html","_auto_id_":"8d865155-522d-42a6-aca4-ea4baed9ceb8","content":"Confirm Details<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_ok","type":"button","item-type":"button","_auto_id_":"8742faea-2fff-4999-8de9-f5e98ffba404","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"ActionDetail","isConditional":false},"_auto_id_":"1a897f0a-3be6-4bc1-86e7-c47135fc2ddd"}],"right-icon":"fa-check","expressions":{},"classes":"iconButton"}],"_auto_id_":"a98c0424-c62e-41e6-aca3-34bc738cb734"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"htmlBanner","type":"content","item-type":"html","_auto_id_":"a7e4cd83-baf6-41cb-b9fa-57c7d6a89fe6","content":"Action Detail Number: {{'$store.api.ScottCo.getaction.data.actionDetailNumber' | store}}","expressions":{}},{"name":"htmlMap","type":"content","item-type":"html","_auto_id_":"69d898c4-f8ca-4bf5-b0f8-c5945cd48f2c","content":"<div class=\"container-fluid\">\n    <div class=\"row\">\n      <div id=\"mapcontainer\" class=\"col-xs-12\">\n        <div id=\"map_search\" class=\"embed-responsive\"></div>\n      </div>\n    </div>\n</div>","expressions":{}},{"name":"htmlActionDetails","type":"content","item-type":"html","_auto_id_":"ff99c85b-007d-46b4-bbc5-772c33644bda","content":"<div>\n</div><div><p class=\"item-label\">Name</p>\n<p class=\"item-value\">{{'$store.api.ScottCo.getaction.data.forename' | store}} {{'$store.api.ScottCo.getaction.data.surname' | store}}</p>\n</div>\n<div><p class=\"item-label\">Address</p>\n<p class=\"item-value\" id=\"displayAddress\"></p>\n</div>\n<div><p class=\"item-label\">Account Balance</p>\n<p class=\"item-value\">{{'$store.CurrentAction.balance' | store}}</p>\n</div>","expressions":{}}],"_auto_id_":"6c4c3539-584e-4ec4-84b7-1192704de56d","expressions":{},"classes":"nopadding"}],"start":false},{"name":"ActionDetail","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_4","type":"button","item-type":"button","_auto_id_":"d2d2a97a-0e37-470e-bc19-f14aab0cadb5","content":"","theme":"minimal","actions":[{"event":"click","type":"call-function","data":{"name":"fnClearAction"},"_auto_id_":"afbb813c-0927-430f-9dc4-2f9cdd92ab81"},{"event":"click","type":"go-to-page","data":{"name":"ConfirmDetails","isConditional":false},"_auto_id_":"b34febf5-1a86-437e-9158-e77c3dc28ad8"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_3","type":"content","item-type":"html","_auto_id_":"1a939ed2-54b7-4086-b725-2f23db57984a","content":"Action Detail<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_9","type":"button","item-type":"button","_auto_id_":"d9e41f46-1f21-4074-8327-baf7b661eca2","content":"","theme":"minimal","actions":[{"type":"if","data":{},"_auto_id_":"7e95d99e-8b55-478c-9014-176f700504ce","operations":[{"type":"value","content":"{{$store.pages.ActionDetail.Outcome.value}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"2","$selected":false}]},{"event":"click","type":"go-to-page","data":{"name":"NoneExecutedOutcome","isConditional":false},"_auto_id_":"4b221ee3-8ceb-48fd-9fd9-6a340c9b6b63"},{"type":"otherwise-if","data":{},"_auto_id_":"e8ad75f8-7bdb-4289-ab28-8d7cbf501d76","operations":[{"type":"value","content":"{{$store.pages.ActionDetail.Outcome.value}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"3","$selected":false}]},{"event":"click","type":"call-function","data":{"name":"fnGotoSummary","params":{"sourcePage":"ActionDetail"}},"_auto_id_":"77372e29-0da4-4150-a3e2-d34e1e1a8514"},{"type":"otherwise","data":{},"_auto_id_":"1793480c-924c-4464-85b1-c0f15af4c708"},{"event":"click","type":"call-function","data":{"name":"fnProcessExecuted"},"_auto_id_":"962a4557-08e5-4856-8d0d-19c9983b94a9"}],"expressions":{"disabled":"$form.invalid"},"right-icon":"fa-chevron-right","classes":"iconButton"}],"_auto_id_":"3deaa4a5-7e51-4f7f-9972-19d1ef7481fc","expressions":{}},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"htmlDetails","type":"content","item-type":"html","_auto_id_":"e9bbe095-3d65-4dc6-9ebc-b3b5f200ccd3","content":"<div><p class=\"item-label\">Sheriff Officer Number</p>\n<p class=\"item-value\">{{'$store.Config.soNumber' | store}} - {{'$store.Config.soName' | store}}</p>\n</div>\n<div><p class=\"item-label\">Witness Number</p>\n<p class=\"item-value\">{{'$store.Config.witnessNumber' | store}} - {{'$store.Config.witnessName' | store}}</p>\n</div>\n<p>NOTE If either the SO or Witness number are incorrect, please change them in \"Settings\"</p>\n","expressions":{}},{"name":"Outcome","type":"choice","item-type":"select","_auto_id_":"2e33f8a3-06b7-4fca-a755-f0bdd55cfc8c","label":"Outcome","required":true,"options":[{"label":"Executed","value":1},{"label":"Non-executed","value":2},{"label":"Attempted","value":3}],"message":"Please select the outcome","validators":[],"actions":[],"expressions":{}},{"name":"ModeOfService","type":"choice","item-type":"select","_auto_id_":"420f20be-f6cc-4ab2-98b4-3a3f20909095","label":"Mode of Service","required":false,"options":[],"expressions":{},"option-source":"$store.Config.serviceModes","label-property":"label","value-property":"value"},{"name":"PersonLeft","type":"user-input","item-type":"text","_auto_id_":"55d37fe8-ef06-4779-993f-27718e4a8c5c","label":"Name of Person Left","required":false,"multiline":false,"debounce":250,"expressions":{"show":"$store.pages.ActionDetail.ModeOfService.value=='L'"},"placeholder":"Who did you leave the notice with?"},{"name":"ResidenceConfirmedBy","type":"user-input","item-type":"text","_auto_id_":"82e96291-82ef-4f5e-9531-56c0b7992eb4","label":"Residence Confirmed By","required":false,"multiline":false,"debounce":250,"expressions":{"show":"$store.pages.ActionDetail.Outcome.value=='1' && $store.pages.ActionDetail.ModeOfService.value=='D'"},"description":"","placeholder":"Name of person who confirmed residence (required)"},{"name":"EnforcementFee","type":"choice","item-type":"select","_auto_id_":"487f687a-a099-442a-9d86-be57243711ab","label":"Enforcement Fee (in Â£)","required":false,"options":[],"expressions":{},"message":"This is a required field","option-source":"$store.Config.fees","label-property":"label","value-property":"value"},{"name":"DebtorAdvicePackLeft","type":"choice","item-type":"select","_auto_id_":"cfc966b5-62ce-40b1-8619-8c228adeb4d7","label":"Debtor Advice Pack Left","required":false,"options":[],"expressions":{"default":"\"0\""},"option-source":"$store.Config.YesNoSelect","label-property":"label","value-property":"value"}],"_auto_id_":"c7fb9ac3-b4f3-4cbd-862a-62f519dedfc6"}]},{"name":"ActionDetails2","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_6","type":"button","item-type":"button","_auto_id_":"4acc0d26-3105-4b98-93bf-6d061b00b9af","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"ActionDetail","isConditional":false},"_auto_id_":"e2b08223-56b8-4794-9563-faf4d118ee92"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_4","type":"content","item-type":"html","_auto_id_":"fbf2193a-1e28-4a66-8a9e-fa01f2f72137","content":"Action Details 2<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_7","type":"button","item-type":"button","_auto_id_":"45864bb6-70ef-4ec1-b650-9634fe9eabc6","content":"","theme":"minimal","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if (cti.store.pages.ActionDetails2.EmploymentDetailsObtained.value && cti.store.pages.ActionDetails2.EmploymentDetailsObtained.value == \"Y\" && !cti.store.pages.ActionDetails2.EmployerName) {\n\tcti.utils.callAction('show-notification', { \n\t  name: \"Warning\", \n      title: \"Validation failed\", \n      text: \"If you specify that employment details are obtained, we require the employer name.\" \n    });\n\n}\nelse if ((cti.store.pages.ActionDetails2.Frequency && cti.store.pages.ActionDetails2.Frequency.value != null) && (!cti.store.pages.ActionDetails2.Amount || cti.store.pages.ActionDetails2.Amount == '0')) {\n\tcti.utils.callAction('show-notification', { \n\t  name: \"Warning\", \n      title: \"Validation failed\", \n      text: \"If you've indicated an installment plan, please enter the amount to be paid.\" \n    });\n\n}\nelse {\n\tcti.utils.callAction(\"go-to-page\", { \"name\": \"ActionDetails3\" });\n}\n"},"_auto_id_":"798d4537-1470-4795-b213-d8ae81e94f86"}],"right-icon":"fa-chevron-right","expressions":{"disabled":"$form.invalid"},"classes":"iconButton"}],"_auto_id_":"e46149ec-3a72-474f-bc35-16d1badc1e32"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"DebtorStatus","type":"choice","item-type":"select","_auto_id_":"e56e2894-516f-47a4-aa5f-b4fbf8ad57e7","label":"Debtor Status","required":true,"options":[],"message":"Please choose debtor status.","expressions":{},"actions":[],"validators":[],"option-source":"$store.Config.statusCodes","label-property":"label","value-property":"value"},{"name":"Interviewee","type":"choice","item-type":"select","_auto_id_":"e93fa5c2-9c3a-4749-bcb8-32f88312fc00","label":"Interviewee","required":true,"options":[],"message":"Please specify interviewee.","expressions":{},"option-source":"$store.Config.intervieweeCodes","label-property":"label","value-property":"value"},{"name":"HouseType","type":"choice","item-type":"select","_auto_id_":"2d9d30a7-9c49-45f4-b2bd-7d4bb6b07c59","label":"House Type","required":true,"options":[],"expressions":{},"option-source":"$store.Config.houseCodes","label-property":"label","value-property":"value","validators":[],"actions":[],"message":"This is a required field"},{"name":"AttachmentProspects","type":"choice","item-type":"select","_auto_id_":"a9813fc4-8a55-4040-b917-e9f5c2a92fdb","label":"Attachment Prospects","required":true,"options":[{"label":"Good","value":"G"},{"label":"Fair","value":"F"},{"label":"Poor","value":"P"},{"label":"Unknown","value":"U"}],"expressions":{},"message":"This is a required field"},{"name":"NewAddressObtained","type":"choice","item-type":"select","_auto_id_":"20f28257-3a16-4580-b525-5faeb83c46c3","label":"New Address Obtained","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field"},{"name":"EmploymentDetailsObtained","type":"choice","item-type":"select","_auto_id_":"fb3e512b-fc1a-4310-94ee-47126e7d5cea","label":"Employment Details Obtained","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"},{"label":"Unemployed","value":"U"}],"expressions":{},"message":"This is a required field","actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"if (cti.store.pages.ActionDetails2.EmploymentDetailsObtained && cti.store.pages.ActionDetails2.EmploymentDetailsObtained.value == \"N\") {\n  if (cti.store.pages.ActionDetails2.EmployerName) {\n    cti.store.pages.ActionDetails2.EmployerName = undefined;\n  }\n}\n"},"_auto_id_":"b4e7a55c-fd6c-41ae-8a36-b24a307813e6"}]},{"name":"EmployerName","type":"user-input","item-type":"text","_auto_id_":"90884b5b-6dee-4a1b-ba52-e9ba171729e8","label":"Name of employer","required":false,"multiline":false,"debounce":250,"placeholder":"Please enter the name of the employer","expressions":{"show":"$store.pages.ActionDetails2.EmploymentDetailsObtained.value=='Y'"},"actions":[]},{"name":"ArrestDetailsObtained","type":"choice","item-type":"select","_auto_id_":"15c6e8d4-7536-4978-b0c1-e814eb9a4943","label":"Arrestment Details Obtained","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field","validators":[],"actions":[]},{"name":"BankName","type":"choice","item-type":"select","_auto_id_":"311200e7-9887-44d5-979e-90617cc63bf5","label":"Bank Name","required":false,"options":[],"expressions":{"show":"$store.pages.ActionDetails2.ArrestDetailsObtained.value=='Y'"},"option-source":"$store.Config.bankNames","label-property":"label","value-property":"value","validators":[],"actions":[]},{"name":"ArrangementObtained","type":"choice","item-type":"select","_auto_id_":"997f5ffd-f117-4e7a-a253-9be820864692","label":"Arrangement Obtained","required":true,"options":[{"label":"Direct Debit","value":"D"},{"label":"Standing Order","value":"S"},{"label":"Installment Plan","value":"I"},{"label":"Allpay","value":"A"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field"},{"name":"Amount","type":"user-input","item-type":"number","_auto_id_":"3eac36bd-06ff-4cf3-938a-413cd0afd79a","label":"Installment plan amount (£)","required":false,"decimals":2,"description":"","expressions":{},"validators":[],"placeholder":"Agreed payment amount","actions":[]},{"name":"Frequency","type":"choice","item-type":"select","_auto_id_":"f2798ded-f8a1-4935-9828-f9e9ae635e89","label":"Frequency","required":false,"options":[{"label":"Weekly","value":1},{"label":"Fortnightly","value":2},{"label":"Monthly","value":"4"}],"expressions":{},"validators":[]},{"name":"StartDate_Day","type":"choice","item-type":"select","_auto_id_":"20137b91-50e9-4815-91cc-92755d9ceabf","label":"Start date","required":false,"options":[],"expressions":{},"option-source":"$store.Config.DayList","label-property":"label","value-property":"value"},{"name":"StartDate_Month","type":"choice","item-type":"select","_auto_id_":"65a4ee8a-9df5-4e3b-bec5-d1b36950bc5f","label":"","required":false,"options":[],"expressions":{},"option-source":"$store.Config.MonthList","label-property":"label","value-property":"value"},{"name":"StartDate_Year","type":"choice","item-type":"select","_auto_id_":"7a4c63d7-3892-4449-9a21-24157f879603","label":"","required":false,"options":[],"expressions":{},"option-source":"$store.Config.YearList2","label-property":"label","value-property":"value"},{"name":"IncomeSupport","type":"choice","item-type":"select","_auto_id_":"53b7cbea-c260-4552-a5a0-23f4a3f43da1","label":"Income Support","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field"},{"name":"AccountantObtained","type":"choice","item-type":"select","_auto_id_":"1afa253a-595a-4a41-aac5-5cb8c194c147","label":"Accountant or Solicitor Details Obtained","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field"},{"name":"VulnerableCustomer","type":"choice","item-type":"select","_auto_id_":"03ce5fcf-47c8-482d-b608-9f84b68c110a","label":"Vulnerable Customer","required":true,"options":[{"label":"Yes","value":"Y"},{"label":"No","value":"N"}],"expressions":{},"message":"This is a required field"}],"_auto_id_":"cd9a59b7-c304-4596-af9b-7e2d9ff85ebd"}]},{"name":"Confirmation","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_8","type":"button","item-type":"button","_auto_id_":"dcb3f775-a9aa-40bc-bf54-604ea54d847c","content":"","theme":"minimal","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"3fc6e78c-7abd-4a61-ba45-36da8b009ef7"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_5","type":"content","item-type":"html","_auto_id_":"afe13c71-2f01-48b0-a1fa-10c3526a3a47","content":"Confirm Submission<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"}],"_auto_id_":"f182fa81-2ec5-4954-9e37-545d8cb6b4ec"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_8","type":"content","item-type":"html","_auto_id_":"df684c5b-a405-4a25-9a0e-f488531d98c0","content":"<p>Please review all of the information and tap <b>Confirm</b> when you are ready to submit this action.</p>\n<div><span class=\"item-label\">Action no.</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.actionDetailNumber' | store}}</span>\n</div><div><span class=\"item-label\">Forename</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.forename' | store}}</span>\n</div><div><span class=\"item-label\">Surname</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.surname' | store}}</span>\n</div><div><span class=\"item-label\">Premise no.</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.premiseNumber' | store}}</span>\n</div><div><span class=\"item-label\">Thoroughfare</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.thoroughfare' | store}}</span>\n</div><div><span class=\"item-label\">Town</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.town' | store}}</span>\n</div><div><span class=\"item-label\">Postcode</span>\n<span class=\"item-value\">{{'$store.api.ScottCo.getaction.data.postcode' | store}}</span>\n</div>\n\n<hr/>\n<div id=\"previewArea\">Preparing preview, please wait a moment...</div>\n<br/>"},{"name":"AdditionalNotes","type":"user-input","item-type":"text","_auto_id_":"f3adf7fc-ed25-43e4-a494-f7bbae65cb19","label":"Additional Notes","required":false,"multiline":true,"debounce":250,"validators":[],"expressions":{},"actions":[]},{"name":"signature_1","type":"user-input","item-type":"signature","_auto_id_":"a8ac6dfb-f41e-40b9-b779-de0da79e790c","label":"Signature: ","required":false,"expressions":{"show":"false"}}],"_auto_id_":"745c46ef-ab1d-462b-986c-70eb1cfdd17c"},{"name":"footer","type":"area","item-type":"button-bar","_auto_id_":"f7461c70-f074-42a5-bddb-0e826547a070","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnConfirmSubmit","type":"button","item-type":"button","_auto_id_":"e337cbb7-4cbc-4baf-95d4-69836abb443d","content":"Confirm","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnConfirmSubmit"},"_auto_id_":"df7f968d-a920-450e-8c6e-31f44769b1e2"}],"left-icon":"fa-check"}],"expressions":{}},{"name":"staticContextMenu","type":"area","item-type":"static","_auto_id_":"e941a56b-b48b-436c-993c-85a43e437b27","content":[{"name":"popConfirmSubmit","type":"component","item-type":"web-component","content":[{"name":"html_14","type":"content","item-type":"html","_auto_id_":"69779f0f-abf0-4931-92f2-17e197439a6c","content":"<h3>Confirm</h3>\n<p>Are you sure you want to submit this completed action?</p>"},{"name":"btnConfirmYes","type":"button","item-type":"button","_auto_id_":"c6baa06e-5643-43da-ae83-95d9ef78b1df","content":"Yes","theme":"default","left-icon":"fa-check","actions":[{"event":"click","type":"call-function","data":{"name":"fnCancelPopup","params":{"popupId":"popConfirmSubmit"}},"_auto_id_":"cd8e11ed-55b3-4151-b918-31e1b2342d1a"},{"event":"click","type":"call-actionflow","data":{"name":"SubmitAction"},"_auto_id_":"25264359-b5fb-4f42-af1f-f9c6780202d4"}],"expressions":{},"classes":"green"},{"name":"btnConfirmNo","type":"button","item-type":"button","_auto_id_":"cc83fa7e-68ce-4007-afd1-3b3658ae122d","content":"No","theme":"default","left-icon":"fa-remove","actions":[{"event":"click","type":"call-function","data":{"name":"fnCancelPopup","params":{"popupId":"popConfirmSubmit"}},"_auto_id_":"b74d8ffc-8eaf-471c-890f-1e8b4bfaf985"}],"expressions":{},"classes":"red"}],"_auto_id_":"4973c0f7-932c-4c88-bed5-4c0106d127e4","attributes":{"id":"popConfirmSubmit"},"actions":[],"expressions":{},"componentId":"c04df03e-20ca-4f06-815b-ed42ca534a76"}],"expressions":{}}]},{"name":"NoneExecutedOutcome","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_10","type":"button","item-type":"button","_auto_id_":"ade997ba-eedd-4531-9356-d03077156d38","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"ActionDetail","isConditional":false},"_auto_id_":"ee3427e0-65b9-4f95-987f-932901fb72cc"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_6","type":"content","item-type":"html","_auto_id_":"f95a9412-0632-4d94-b359-dfda0495c2d3","content":"None Executed Outcome<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_11","type":"button","item-type":"button","_auto_id_":"46801d51-ad64-4c03-a8b1-151d2cf7abec","content":"","theme":"minimal","actions":[{"event":"click","type":"call-function","data":{"name":"fnGotoSummary","params":{"sourcePage":"NoneExecutedOutcome"}},"_auto_id_":"88cf704b-d3dd-4894-8336-48eb47de8acb"}],"expressions":{"disabled":"$form.invalid"},"right-icon":"fa-chevron-right","classes":"iconButton"}],"_auto_id_":"bc5260e7-7f17-4da7-ad82-ae0a20e21cc8"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"NoneExecutedReason","type":"choice","item-type":"select","_auto_id_":"9d7b05ff-133d-4239-9c3a-35b335882fbf","label":"None Executed Outcome Reason","required":true,"options":[],"expressions":{},"message":"Please choose the reason for none-execution.","option-source":"$store.Config.noneExecutionCodes","label-property":"label","value-property":"value"}],"_auto_id_":"d4d3af6e-c308-42be-9544-07f8f57a2f11","expressions":{}}]},{"name":"ActionDetails3","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_12","type":"button","item-type":"button","_auto_id_":"2875696e-6d47-45bf-8280-45b39180dbae","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"ActionDetails2","isConditional":false},"_auto_id_":"4ac08933-63a1-41a7-9c50-acec10da0729"}],"left-icon":"fa-chevron-left","expressions":{},"classes":"iconButton"},{"name":"html_7","type":"content","item-type":"html","_auto_id_":"6c082a99-59b7-471c-b627-f034659e4172","content":"Action Details 3<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_13","type":"button","item-type":"button","_auto_id_":"d0ce3d73-d938-4694-b7f2-f5dd01c10a8a","content":"","theme":"minimal","actions":[{"event":"click","type":"call-function","data":{"name":"fnGotoSummary","params":{"sourcePage":"ActionDetails3"}},"_auto_id_":"4794e570-9f87-4cd0-af01-fdae2d086088"}],"right-icon":"fa-check","expressions":{},"classes":"iconButton"}],"_auto_id_":"540a2749-5002-410b-b0ac-85ab6a4e8bef","expressions":{}},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"HomeTelephone","type":"user-input","item-type":"text","_auto_id_":"018c3455-85f0-4cd2-8602-cde2fda50f9e","label":"Home Telephone Number","required":false,"multiline":false,"debounce":250,"expressions":{},"default":"","left-icon":"fa-phone"},{"name":"MobileTelephone","type":"user-input","item-type":"text","_auto_id_":"5ced34ec-4a2b-4986-9204-4036cc817d26","label":"Mobile Telephone Number","required":false,"multiline":false,"debounce":250,"default":"","expressions":{},"left-icon":"fa-phone"},{"name":"WorkTelephone","type":"user-input","item-type":"text","_auto_id_":"fb4661dd-2181-451a-9480-fdccbe7138c9","label":"Work Telephone Number","required":false,"multiline":false,"debounce":250,"default":"","expressions":{},"left-icon":"fa-mobile-phone"},{"name":"NINumber","type":"user-input","item-type":"text","_auto_id_":"7cc15541-584c-46ec-91f9-c819b9551759","label":"NI Number","required":false,"multiline":false,"debounce":250,"expressions":{},"default":"","placeholder":"e.g. JK 94 98 24 B","left-icon":"fa-credit-card"},{"name":"DateOfBirth_Day","type":"choice","item-type":"select","_auto_id_":"3173cc64-6467-4138-a243-4aac43afdc4a","label":"Date of Birth","required":false,"options":[],"searchable":true,"expressions":{},"option-source":"$store.Config.DayList","label-property":"label","value-property":"value","validators":[],"actions":[]},{"name":"DateOfBirth_Month","type":"choice","item-type":"select","_auto_id_":"6e9735e0-2b1e-4278-8dd7-27fd7ea23459","label":" ","required":false,"options":[],"searchable":true,"option-source":"$store.Config.MonthList","label-property":"label","value-property":"value","expressions":{}},{"name":"DateOfBirth_Year","type":"choice","item-type":"select","_auto_id_":"97b4ad56-8417-40b9-ac5b-ac595a6273de","label":" ","required":false,"options":[],"searchable":true,"option-source":"$store.Config.YearList","label-property":"label","value-property":"value","expressions":{}}],"_auto_id_":"f80250e1-8558-4a63-bb23-94cacbe5eb5f"}]},{"name":"SubmitConfirmed","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_9","type":"content","item-type":"html","_auto_id_":"646b7f46-85ac-47c5-b498-b0ee2d30a063","content":"Confirmation<p class=\"version\">{{'$store.Config.companyName' | store}}</p>"},{"name":"button_14","type":"button","item-type":"button","_auto_id_":"bd8ce8bf-de29-4c78-b629-7929926acbd3","content":"","theme":"minimal","actions":[{"event":"click","type":"go-to-page","data":{"name":"SearchForAction","isConditional":false},"_auto_id_":"f08bf205-07f1-4718-824b-c0018bd6572d"}],"right-icon":"fa-chevron-right","expressions":{},"classes":"iconButton"}],"_auto_id_":"f4584636-0e79-46ee-8cbf-ba492383a69a"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_10","type":"content","item-type":"html","_auto_id_":"1bac9ad3-760d-4329-a403-48a1484d3084","content":"<h4>Your action was saved successfully</h4>"}],"_auto_id_":"e8c949e5-f310-42b9-8279-9fbf80d30596"}]},{"name":"Settings","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_title","type":"content","item-type":"html","_auto_id_":"44b25e9c-218f-4f8d-8856-5f28d156c96b","content":"Settings","expressions":{}}],"_auto_id_":"73db1b04-c316-4ae3-9d02-e462dc05d05a"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"SheriffOfficer","type":"user-input","item-type":"text","_auto_id_":"2235e9e5-b8ed-4581-9908-0fc02ad6f88d","label":"Sheriff Officer Name","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"Witness","type":"user-input","item-type":"text","_auto_id_":"c150589c-a9c4-4c34-941c-e6e7c0d628e3","label":"Witness Name","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"CompanyMode","type":"choice","item-type":"select","_auto_id_":"f8808bc3-3bf3-4f18-b07d-79d7a1d29fa4","label":"Company","required":false,"options":[{"label":"Scott & Co","value":"1"},{"label":"AAH","value":"2"},{"label":"DevLib (Testing only)","value":"3"}],"expressions":{}}],"_auto_id_":"d9742405-80a9-46c5-87e2-25e7b855d1bb","expressions":{}},{"name":"footer","type":"area","item-type":"button-bar","_auto_id_":"67b4ac40-db35-4181-a088-a1c85fb193a7","extends":{"type":"area","item-type":"row"},"content":[{"name":"button_save","type":"button","item-type":"button","_auto_id_":"40a817fa-9684-4e69-b20f-5ac474b5ff39","content":"Save","theme":"default","actions":[{"event":"click","type":"call-actionflow","data":{"name":"VerifyConfig"},"_auto_id_":"3ff8f957-581d-4154-824d-088c1b9ee32a"}],"expressions":{}}],"expressions":{}}]}],"actionflows":[{"content":[{"event":"click","type":"call-function","data":{"name":"fnClearAction"},"_auto_id_":"646c9b53-d314-43c9-a757-a61e23b69c7a"},{"type":"if","data":{},"_auto_id_":"3d332a13-ebd4-4f5c-bb71-84e0ac988048","operations":[{"type":"value","content":"{{$store.pages.SearchForAction.ActionId}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"undefined","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Warning","title":"Required information missing","text":"Please enter the action number you wish to search for"},"_auto_id_":"83eb9d04-a354-4a41-84de-d3ad49b0df4d"},{"type":"otherwise","data":{},"_auto_id_":"6061b345-6801-4e71-bad2-e73ac9277ec4"},{"event":"click","type":"call-api","data":{"sync":true,"name":"ScottCo","operation":"getaction","params":{"actionId":"{{$store.pages.SearchForAction.ActionId}}","company":"{{$store.Config.company}}","companyId":"{{$store.Config.company}}","applicationkey":"{{$store.schema.metadata.applicationkey}}"}},"_auto_id_":"ddb1a130-936b-4cd6-8111-4a91e8f896e0","actions":[{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Warning","title":"Not available","text":"We weren't able to communicate and retrieve information about the action. Please try again later."},"_auto_id_":"20a14f2b-3b55-43ac-9335-ed3928bc2407"},{"event":"success","type":"call-actionflow","data":{"name":"DisplayAction"},"_auto_id_":"e6bada7b-b399-4fba-bad9-e7e65dba3638"}]}],"name":"RequestAction"},{"content":[{"type":"if","data":{},"_auto_id_":"67783248-fb8b-4855-ab0c-523a13357bc0","operations":[{"type":"value","content":"{{$store.api.ScottCo.getaction.success}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"call-function","data":{"name":"fnSetCurrentAction"},"_auto_id_":"4ad0623a-fec4-4a9b-bde7-a9a351b56ba4"},{"event":"click","type":"go-to-page","data":{"name":"ConfirmDetails","isConditional":false},"_auto_id_":"96cf0460-3fc6-49e2-a3b6-cb44a3b5e5f3"},{"type":"otherwise","data":{},"_auto_id_":"9633217e-1890-4c1e-be2f-815f6afe53d7"},{"event":"click","type":"go-to-page","data":{"name":"ActionMessage","isConditional":false},"_auto_id_":"e2a16872-1948-4e96-8e19-711b3d3648fe"}],"name":"DisplayAction"},{"content":[{"event":"click","type":"call-function","data":{"name":"fnBuildSubmitPayload"},"_auto_id_":"b8ad805d-b889-4ad6-bff4-d828ee892cd5"},{"event":"click","type":"call-api","data":{"sync":true,"name":"ScottCo","operation":"saveaction","params":{"payload":"{{$store.saveActionPayload}}","applicationkey":"{{$store.schema.metadata.applicationkey}}"}},"_auto_id_":"9401b773-cfbe-4e4e-b131-41f4ab691aa3","actions":[{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Warning","title":"Action could not be saved","text":"We weren't able to communicate and save your completed action. Please check you have an internet connection or try again later."},"_auto_id_":"795fda22-7fde-4a79-af1e-766e095cd638"},{"event":"success","type":"call-function","data":{"name":"fnVerifySaveAction"},"_auto_id_":"5ce1301b-a1d4-482f-a5b8-ed133f884673"}]}],"name":"SubmitAction"},{"content":[{"event":"click","type":"call-api","data":{"sync":true,"name":"ScottCo","operation":"getconfig","params":{"company":"{{$store.pages.Settings.CompanyMode.value}}","applicationkey":"{{$store.schema.metadata.applicationkey}}","companyId":"{{$store.pages.Settings.CompanyMode.value}}"}},"_auto_id_":"f7d91676-0f29-4280-a7c7-269bc37e1e90","actions":[{"event":"success","type":"call-function","data":{"name":"fnSaveSettings"},"_auto_id_":"e148e4e9-9f05-4378-b099-abab9e62813d"},{"event":"fail","type":"call-function","data":{"name":"fnSaveSettings"},"_auto_id_":"efe20883-f6f7-4e79-bbdd-bd29e0fe15c0"}]}],"name":"VerifyConfig"}],"dataflows":[],"config":[{"name":"ScottCo","type":"integration","item-type":"api","_auto_id_":"738ca597-42d0-4ee3-9c7c-16dd2a3065bf","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"getaction","summary":"Find details about the requested action","path":"selectaction","method":"POST","content-type":"application/json","params":[{"name":"actionId","description":"Action number to retrieve","type":"string","typeConfig":{},"in":"body","required":true},{"name":"companyId","description":"Company 1=Scott Co 2=AAH 3=Test","type":"string","typeConfig":{},"in":"body","default":"3"},{"name":"applicationkey","description":"App access key","type":"string","typeConfig":{},"in":"body"}],"$open":true},{"ttlMinutes":60,"name":"saveaction","summary":"Save a completed action","path":"saveaction","method":"POST","content-type":"application/json","params":[{"name":"payload","description":"Completed action with all details captured by user","type":"string","typeConfig":{},"in":"body"},{"name":"applicationkey","description":"App access key","type":"string","typeConfig":{},"in":"body"}]},{"ttlMinutes":60,"name":"getconfig","summary":"Get configuration options","path":"config","method":"POST","content-type":"application/json","params":[{"name":"companyId","description":"Company","type":"string","typeConfig":{},"in":"body"},{"name":"applicationkey","description":"API key to allow use of services","type":"string","typeConfig":{},"in":"header"}],"$open":false}],"url":"http://scottmdm02:8000/api/"},{"name":"Warning","type":"notification","item-type":"app-notification","_auto_id_":"ce3cc8fe-9ed3-41dc-b0b3-667266fddda6","options":{"autoDismiss":true,"closeButton":true},"style":"warning","title":"Unable to complete action","text":"Please try again later"},{"name":"image_edinburgh","type":"style","item-type":"image-asset","_auto_id_":"b402c8b2-81b8-4527-a289-83049320bae8","fileName":"scottandco.jpg"},{"name":"cssAdditional","type":"style","item-type":"css","_auto_id_":"301886a6-71f9-4735-b0d7-74d717355e3a","content":"section#footer {\n    background: transparent;\n  \tborder:0;\n}\n\nmd-question[required=true] label {\n    color: #a94442;\n}\n\n.has-success .form-control:focus {\n    border-color: #009C87;\n}\n\nspan.required-asterix.fa.fa-star {\n    display: none!important;\n}\n\n.has-success .form-control {\n    border-color: #009C87;\n}\n\n.form-input-error {\n    font-size: 10px;\n}\n\n.has-success .checkbox, .has-success .checkbox-inline, .has-success .control-label, .has-success .help-block, .has-success .radio, .has-success .radio-inline, .has-success.checkbox label, .has-success.checkbox-inline label, .has-success.radio label, .has-success.radio-inline label {\n    color: #009C87;\n}\n\n.flexbox-container .navbar-default.row-item:last-child .btn:not(.minimal):hover {\n    background-color: #009C87;\n}\n/*\n.btn:not(.minimal) {\n    background-color: #009C87!important;\n    padding: 10px;\n    width: 100%;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n  \tborder:0;\n  \tcolor:white;\n}\n\n.md-button-container {\n    width: 33%;\n}\n*/\n\nsection#title_bar {\n    background-color: #002768;\n  \tcolor:white;\n  \tborder:0;\n  \tbox-shadow: 0 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.23);\n}\n\nsection#title_bar .content-block {\n    margin-bottom:0;\n}\n\n.iconButton {\n    color: white!important;\n    font-size: 2em;\n}\n\n.iconButton a {\n    color: white;\n}\n\nsection#title_bar > div:first-child {\n    position: absolute;\n    left: 0;\n    width: 2em;\n}\n\nsection#title_bar > div:last-child {\n    position: absolute;\n    right: 2em;\n    width: 2em;\n}\n\n.nopadding {\n    padding: 0!important;\n}\n\nmd-content#htmlActionDetails .content-block {\n    padding: 20px;\n}\n\nmd-content#htmlBanner .content-block {\n    background-color: #009C87;\n    padding: 10px;\n    margin: 0;\n    color: white;\n    text-align: center;\n}\n\ndiv#mapcontainer {\n    height: 40vh;\n}\n\nbutton.dropdown-toggle {\n    background-color: transparent!important;\n    padding: 6px 25px 6px 12px;\n}\n\n.image-viewer-container.logo {\n    padding: 10px;\n    text-align: center;\n    background-color: #f6f6f5;\n}\n\n.image-viewer-container.logo img{\n\twidth:75vw;\n}\n\nsection#row_search {\n    background-color: #002768;\n    padding: 10px;\n  \tborder:0;\n    box-shadow: 5px 5px 10px rgba(0,0,0,0.19), 5px 3px 3px rgba(0,0,0,0.23);\n}\n\nmd-question#ActionId {\n    flex-basis: 75%;\n}\n\ndiv#btnSearchAction {\n    width: 2em;\n}\n\na#btnSearchAction {\n    padding: 0;\n    margin-top: 10px;\n}\n\ndiv#SearchForAction {\n    background-image: url('user-assets/scottandco.jpg');\n    background-size: cover;\n    background-position-x: 80%;\n}\n\ninput#ActionId {\n    background: transparent;\n    border: 1px solid white;\n  \ttext-align: center;\n    color: white;\n}\n\nbutton.btn.btn-default.dropdown-toggle {\n    background: transparent!important;\n    padding: 6px 25px 6px 12px;\n  \tcolor:black;\n}\n\n.content-block {\n    margin-bottom: 0!important;\n    padding-bottom: 0!important;\n}"},{"name":"cssMain","type":"style","item-type":"css","_auto_id_":"044a2840-9e6c-48fb-b571-f7b6273183b9","content":"[name=\"pageForm\"] {\n}\n\n.navbar-default {\n\tflex: inherit;\n}\n.navbar-default md-content[item-type=\"html\"] {\n  font-size:16pt;\n  margin-top:10px;\n}\n\n.navbar-default .md-button-container {\n  margin-left:8px !important;\n  margin-right:8px !important;\n}\np.version {\n\twidth:100%;\n\ttext-align:center;\n  \tcolor:#bbb;\n  \tfont-size:10pt;\n}\n\n\nsection.static-item {\n\tdisplay:block;\n\tflex:none;\n}\nsection[item-type=\"static\"] {\n\tborder: none !important;\n\tpadding: 0 !important;\n}\n"},{"name":"cssPopup","type":"style","item-type":"css","_auto_id_":"3471835d-6673-4b6c-a47c-d95959be5e85","content":"ct-popup-box div.popupBG {\n    display: flex;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 999\n}\nct-popup-box div.popupBG div.popupBox {\n    width: 80vw;\n    background-color: white;\n    margin: auto;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center\n}\nct-popup-box md-content {\n    margin: 2vh auto;\n    text-align: center;\n    padding: 3vh 4vw 0\n}\nct-popup-box .md-button-container {\n    margin: 0 auto !important;\n    width: 72vw\n}\nct-popup-box .md-button-container a,\nct-popup-box .md-button-container a:hover {\n    color: white !important;\n    width: 100%;\n    border: none;\n    padding: 2vh 0;\n    margin-bottom: 2vh\n}\nct-popup-box div[classes=\"green\"] a,\nct-popup-box div[classes=\"green\"] a:hover {\n    background-color: green !important\n}\nct-popup-box div[classes=\"red\"] a,\nct-popup-box div[classes=\"red\"] a:hover {\n    background-color: red !important\n}\nct-popup-box#popFailReason md-content {\n    margin: 0 auto 1vh;\n    padding: 2vh 4vw 0\n}\nct-popup-box#popFailReason .md-button-container a,\nct-popup-box#popFailReason .md-button-container a:hover {\n    color: black !important;\n    border: 1px solid black;\n    padding: 1vh 0;\n    margin-bottom: 1vh;\n    white-space: normal\n}\nct-popup-box#popFailReason div[classes=\"red\"] a,\nct-popup-box#popFailReason div[classes=\"red\"] a:hover {\n    color: white !important;\n    border: 1px solid red\n}\n.box {\n    width: 50vw;\n    height: 15vh;\n    display: flex;\n    flex-direction: column;\n    border: 1px solid #d3d3d3;\n    float: left;\n    background-color: white;\n    text-align: center\n}\n.box:nth-child(3),\n.box:nth-child(4) {\n    border-left: none\n}\n.box h3 {\n    word-wrap: break-word;\n    white-space: pre-line;\n    margin: auto 2vw;\n    font-size: 18px\n}\n.box h3 span {\n    font-size: 62px\n}\n.box.btn {\n    width: 30vw;\n    background-color: #3E788F\n}\n.box.btn h3 {\n    color: white;\n    line-height: 28px\n}\n \n"},{"name":"cssApp","type":"style","item-type":"css","_auto_id_":"6a27168a-f86e-4274-a63e-3022f81e17d3","content":".item-label {\n  font-size:0.8em;\n}\n.item-value {\n  font-size:1.2em;\n  font-weight:700;\n}\nspan.item-label {\n  display:inline-block;\n  min-width:40%;\n}\n.label-area {\n  display:inline-block;\n  width:40%;\n  font-size:0.8em;\n}\n.value-area {\n  display:inline-block;\n  font-weight:700;\n  font-size:1.0em;\n}\n\ndiv#StartDate_Day,\ndiv#StartDate_Year,\ndiv#DateOfBirth_Day,\ndiv#DateOfBirth_Year {\n  display: inline-block;\n  width:25%;\n}\ndiv#StartDate_Month,\ndiv#DateOfBirth_Month {\n  display: inline-block;\n  width:50%;\n}\n"},{"name":"cssResponsiveStyles","type":"style","item-type":"css","_auto_id_":"246d2cad-5260-4d97-8c5a-f3381b1d9ca9","content":"@media only screen and (orientation: landscape) {\n\t#htmlMap {\n      float:right;\n  \t}\n  \t#htmlActionDetails {\n      float:left;\n  \t}\n  \tdiv#mapcontainer {\n      height:70vh;\n      width:60vw;\n  \t}\n}"},{"name":"function_init_map","type":"scripting","item-type":"function","_auto_id_":"c60f129a-8311-4bec-a0a5-3559af555139","sync":true,"params":[],"content":"// set up our geoCoder\nvar geocoder = new google.maps.Geocoder();\n\n// get our postcode value\nvar add = cti.store.api.ScottCo.getaction.data.postcode;\n\n//send value to google to get a longitude and latitude value \ngeocoder.geocode({'address': add}, function(results, status) \n                 {   \n  // callback with a status and result\n  if (status == google.maps.GeocoderStatus.OK) \n  {\n    var myLatlng = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng());\n\n    var map = new google.maps.Map(document.getElementById('mapcontainer'), {\n      zoom: 18,\n      center: myLatlng,\n      mapTypeId: 'hybrid'\n    });\n\n    // Place a draggable marker on the map\n    var marker = new google.maps.Marker({\n      position: myLatlng,\n      map: map,\n      animation: google.maps.Animation.DROP\n    });\n  }\n});\n","actions":[]},{"name":"fnCancelPopup","type":"scripting","item-type":"function","_auto_id_":"6861166f-e288-4aaf-b23d-989ee4671ed5","sync":false,"params":[{"name":"popupId","description":"Id of the element"}],"content":"var popup = document.getElementById(popupId);\nif (popup !== undefined && popup !== null)\n\tpopup.toggle();"},{"name":"fnClearAction","type":"scripting","item-type":"function","_auto_id_":"70c6e8da-9ff7-4224-9b06-534f12d0f32e","sync":true,"params":[],"content":"delete cti.store.saveActionPayload;\ncti.store.pages.ActionDetail = {};\ncti.store.pages.ActionDetails2 = {};\ncti.store.pages.ActionDetails3 = {};\ncti.store.pages.NoneExecutedOutcome = {};\ncti.store.pages.Confirmation = {};\n\nfunction initialiseSelectEntry(page, question, label, value) {\n  cti.store.pages[page][question] = { \"label\": label, \"value\": value };\n}\n/*\ninitialiseSelectEntry(\"ActionDetails2\",\"DebtorStatus\",\"6 - None\",\"0\");\ninitialiseSelectEntry(\"ActionDetails2\",\"Interviewee\",\"8 - None\",\"0\");\ninitialiseSelectEntry(\"ActionDetails2\",\"HouseType\",\"9 - None\",\"0\");\ninitialiseSelectEntry(\"ActionDetails2\",\"AttachmentProspects\",\"Unknown\",\"U\");\ninitialiseSelectEntry(\"ActionDetails2\",\"NewAddressObtained\",\"No\",\"N\");\ninitialiseSelectEntry(\"ActionDetails2\",\"EmploymentDetailsObtained\",\"No\",\"N\");\ninitialiseSelectEntry(\"ActionDetails2\",\"ArrestDetailsObtained\",\"No\",\"N\");\ninitialiseSelectEntry(\"ActionDetails2\",\"ArrangementObtained\",\"No\",\"N\");\ninitialiseSelectEntry(\"ActionDetails2\",\"IncomeSupport\",\"No\",\"N\");\ninitialiseSelectEntry(\"ActionDetails2\",\"AccountantObtained\",\"No\",\"N\");\n*/\n\ncti.store.pages.ActionDetails3.HomeTelephone = \"\";\ncti.store.pages.ActionDetails3.MobileTelephone = \"\";\ncti.store.pages.ActionDetails3.WorkTelephone = \"\";\ncti.store.pages.ActionDetails3.NINumber = \"\";\n\n\n\n/*\ndelete cti.store.pages.ActionDetail;\ndelete cti.store.pages.ActionDetails2;\ndelete cti.store.pages.ActionDetails3;\ndelete cti.store.pages.NoneExecutedOutcome;\n*/\nthis.$success();"},{"name":"fnSubmitSearch","type":"scripting","item-type":"function","_auto_id_":"1f0b1960-6082-408a-a1fd-a099ae3ee565","sync":false,"params":[],"content":"if (cti.store.Config === undefined) {\n\tvar popup = document.getElementById(\"popNeedConfig\");\n\tif (popup !== undefined && popup !== null)\n\t\tpopup.toggle();\n  \n}\nelse {\n\tcti.utils.callAction(\"call-actionflow\", { name: \"RequestAction\" });\n}"},{"name":"fnSetCurrentAction","type":"scripting","item-type":"function","_auto_id_":"616c5898-4216-46a5-bc42-17d39bc1dead","sync":true,"params":[],"content":"if (cti.store.CurrentAction === undefined) { \n\tcti.store.CurrentAction = {} \n}\n\ncti.store.CurrentAction.actionId = cti.store.api.ScottCo.getaction.data.actionDetailNumber;\ncti.store.CurrentAction.balance = '(unknown)';\n\nif (cti.store.api.ScottCo.getaction.data.balance !== undefined) {\n  cti.store.CurrentAction.balance = 'Â£' + cti.store.api.ScottCo.getaction.data.balance.toFixed(2);\n}\n\nfunction addText(address, s, delim) {\n\tif (s === undefined || s == null || s.trim() == '') {\n\t\treturn address;\n\t}\n\t\n\tif (address.trim() == '') { \n\t\treturn s \n\t}\n\telse {\n\t\treturn address + delim + s.trim();\n\t}\n}\n\nvar address = '';\naddress = addText(address, cti.store.api.ScottCo.getaction.data.orgName);\naddress = addText(address, cti.store.api.ScottCo.getaction.data.dept, '<br/>');\naddress = addText(address, cti.store.api.ScottCo.getaction.data.poBox, ', ');\n\naddress = addText(address, cti.store.api.ScottCo.getaction.data.household, '<br/>');\naddress = addText(address, cti.store.api.ScottCo.getaction.data.subPremise, '<br/>');\n\nvar premise = '';\npremise = addText(premise, cti.store.api.ScottCo.getaction.data.premiseNumber);\npremise = addText(premise, cti.store.api.ScottCo.getaction.data.premiseName, ', ');\naddress = addText(address, premise, '<br/>');\n\nvar thoroughfare = '';\nthoroughfare = addText(thoroughfare, cti.store.api.ScottCo.getaction.data.depThoroughfare);\nthoroughfare = addText(thoroughfare, cti.store.api.ScottCo.getaction.data.thoroughfare, ', ');\naddress = addText(address, thoroughfare, '<br/>');\n\nvar locality = '';\nlocality = addText(locality, cti.store.api.ScottCo.getaction.data.ddepLocality);\nlocality = addText(locality, cti.store.api.ScottCo.getaction.data.depLocality, ', ');\naddress = addText(address, locality, '<br/>');\n\naddress = addText(address, cti.store.api.ScottCo.getaction.data.town, '<br/>');\naddress = addText(address, cti.store.api.ScottCo.getaction.data.county, '<br/>');\naddress = addText(address, cti.store.api.ScottCo.getaction.data.postcode, '<br/>');\n\ncti.store.CurrentAction.fullAddress = address;\n\n\nthis.$success();","actions":[]},{"name":"fnBuildPreview","type":"scripting","item-type":"function","_auto_id_":"acc41d7b-ea45-4355-95f4-d89d07e3f0ef","sync":true,"params":[],"content":"var schema = cti.store.schema;\nvar content = \"\";\n\nfunction getObjects(obj, key, val) {\n\tvar objects = [];\n\tfor (var i in obj) {\n      \tif (!obj.hasOwnProperty(i))\n          \tcontinue;\n    \tif (typeof obj[i] === 'object') {\n        \tobjects = objects.concat(getObjects(obj[i], key, val));\n        }\n    \telse {\n        \tif (i == key && obj[i] == val || i == key && val == '') {\n            \tobjects.push(obj);\n            }\n        \telse if (obj[i] == val && key == '') {\n            \tif (objects.lastIndexOf(obj) == -1) {\n                \tobjects.push(obj);\n                }\n            }\n        }\n    }\n\treturn objects;\n}\n\nfunction sanitiseAnswer(answer) {\n\tif (answer === undefined || answer == '') { return undefined; }\n\tif (typeof answer === 'object' && answer.hasOwnProperty('label')) {\n      return answer.label;\n    }\n  \treturn answer;\n}\n\nfunction buildPageSummary(pageName) {\n    var result = '';\n\tfor (var i = 0; i < schema.pages.length; i++) {\n    \tif (schema.pages[i].name.toLowerCase() == pageName.toLowerCase()) {\n        \t//var questions = getObjects(schema.pages[i].content, 'type', 'question');\n        \tvar choices = getObjects(schema.pages[i].content, 'type', 'choice');\n        \tvar userInputs = getObjects(schema.pages[i].content, 'type', 'user-input');\n            var questions = choices.concat(userInputs);\n          \n        \tfor (var p in questions) {\n            \tvar questionName = questions[p].name;\n            \tvar label = questions[p].label;\n            \tvar answer = sanitiseAnswer(cti.store.pages[pageName][questionName]);\n            \tif (answer !== undefined && questionName.substr(0,11) !== 'DateOfBirth') {\n\t\t\t\t\tresult += '<div><span class=\"label-area\">'+label+'</span><span class=\"value-area\">'+answer+'</span></div>';\n                }\n            }\n        }\n    }\n\treturn result;\n}\n\n\nfunction getDOBValue(field) {\n  return (cti.store.pages.ActionDetails3 !== undefined && cti.store.pages.ActionDetails3[field] !== undefined) ?\n    cti.store.pages.ActionDetails3[field].label.toString() : undefined;\n}\n\nwindow.setTimeout(function() {\n  content = buildPageSummary('ActionDetail');\n  if (cti.store.pages.ActionDetail.Outcome.value == 2) {\n\tcontent += buildPageSummary('NoneExecutedOutcome');\n  }\n  else if (cti.store.pages.ActionDetail.Outcome.value == 1) {\n  \tcontent += buildPageSummary('ActionDetails2');\n  \tcontent += buildPageSummary('ActionDetails3');\n\tvar dateOfBirth = \"(not entered)\";\n    var _d = getDOBValue('DateOfBirth_Day');\n    var _m = getDOBValue('DateOfBirth_Month');\n    var _y = getDOBValue('DateOfBirth_Year');\n\tif (_d && _m && _y) {\n      dateOfBirth = _d;\n      dateOfBirth += (' ' + _m);\n      dateOfBirth += (' ' + _y);\n    }\n\tcontent += '<div><span class=\"label-area\">Date of Birth</span><span class=\"value-area\">'+dateOfBirth+'</span></div>';\n    \n  }\n  \n  document.getElementById(\"previewArea\").innerHTML = content;\n}, 1200);\n"},{"name":"fnGotoSummary","type":"scripting","item-type":"function","_auto_id_":"a3214807-e1f3-44f4-813c-c918ea8e2475","sync":true,"params":[{"name":"sourcePage","description":"The page we came from so we can navigate back"}],"content":"cti.store.preSummaryPage = sourcePage;\ncti.utils.callAction(\"go-to-page\", {\"name\":\"Confirmation\"});\ncti.fnBuildPreview();"},{"name":"fnBackFromSummary","type":"scripting","item-type":"function","_auto_id_":"809d7a64-deec-4af9-81b1-0c5403562605","sync":true,"params":[],"actions":[],"content":"var pageName = \"ActionDetail\"; \nif (cti.store.preSummaryPage !== undefined) {\n\tpageName = cti.store.preSummaryPage;\n}\ncti.utils.callAction(\"go-to-page\", {\"name\":pageName});\n"},{"name":"fnBuildSubmitPayload","type":"scripting","item-type":"function","_auto_id_":"5c4fe34c-f456-4101-9d41-577d2340922e","sync":true,"params":[],"content":"debugger;\nvar schema = cti.store.schema;\nvar payload = {};\n\nfunction getObjects(obj, key, val) {\n\tvar objects = [];\n\tfor (var i in obj) {\n      \tif (!obj.hasOwnProperty(i))\n          \tcontinue;\n    \tif (typeof obj[i] === 'object') {\n        \tobjects = objects.concat(getObjects(obj[i], key, val));\n        }\n    \telse {\n        \tif (i == key && obj[i] == val || i == key && val == '') {\n            \tobjects.push(obj);\n            }\n        \telse if (obj[i] == val && key == '') {\n            \tif (objects.lastIndexOf(obj) == -1) {\n                \tobjects.push(obj);\n                }\n            }\n        }\n    }\n\treturn objects;\n}\n\nfunction sanitiseAnswer(answer) {\n\tif (answer === undefined || answer == '') { return undefined; }\n\tif (typeof answer === 'object' && answer.hasOwnProperty('value')) {\n      return answer.value;\n    }\n  \treturn answer;\n}\n\nfunction buildPayload(pageName, payloadObject) {\n\tfor (var i = 0; i < schema.pages.length; i++) {\n    \tif (schema.pages[i].name.toLowerCase() == pageName.toLowerCase()) {\n        \tvar questions = [];\n            questions = questions.concat(getObjects(schema.pages[i].content, 'type', 'choice'));\n            questions = questions.concat(getObjects(schema.pages[i].content, 'type', 'user-input'));\n        \tfor (var p in questions) {\n            \tvar questionName = questions[p].name;\n            \tvar answer = sanitiseAnswer(cti.store.pages[pageName][questionName]);\n            \tif (answer !== undefined) {\n                  payload[questionName] = answer;\n                }\n            }\n        }\n    }\n}\n\nbuildPayload('ActionDetail', payload);\nbuildPayload('NoneExecutedOutcome', payload);\nbuildPayload('ActionDetails2', payload);\nbuildPayload('ActionDetails3', payload);\n\nvar dateOfBirth = \"0\";\nif (payload.DateOfBirth_Day && payload.DateOfBirth_Month && payload.DateOfBirth_Year) {\n  dateOfBirth = payload.DateOfBirth_Year.toString();\n  dateOfBirth += payload.DateOfBirth_Month.toString();\n  dateOfBirth += payload.DateOfBirth_Day.toString();\n}\n\ndelete payload.DateOfBirth_Day;\ndelete payload.DateOfBirth_Month;\ndelete payload.DateOfBirth_Year;\n\npayload.DateOfBirth = dateOfBirth;\n\n// Installment start date\nvar startDate = \"0\";\nif (payload.StartDate_Day && payload.StartDate_Month) {\n  if (payload.StartDate_Year) {\n  \tstartDate = payload.StartDate_Year.toString();\n  }\n  else {\n  \tstartDate = (new Date()).getFullYear().toString();\n  }\n  startDate += payload.StartDate_Month.toString();\n  startDate += payload.StartDate_Day.toString();\n}\n\ndelete payload.StartDate_Day;\ndelete payload.StartDate_Month;\ndelete payload.StartDate_Year;\n\npayload.StartDate = startDate;\n\n\nif (cti.store.pages.Confirmation !== undefined && cti.store.pages.Confirmation.AdditionalNotes !== undefined) {\n\tpayload.AdditionalNotes = cti.store.pages.Confirmation.AdditionalNotes;\n}\npayload.ActionId = cti.store.CurrentAction.actionId;\npayload.companyId = cti.store.Config.company;\npayload.applicationkey = cti.store.schema.metadata.applicationkey;\npayload.SheriffOfficer = cti.store.Config.soNumber;\npayload.WitnessNumber = cti.store.Config.witnessNumber;\n\n// TODO Sanity check that the user has been set by now\n\nif (cti.store.Config === undefined || cti.store.Config.lastUsername === undefined) {\n\tpayload.Username = 'NOT ENTERED';\n}\nelse {\n\tpayload.Username = cti.store.Config.lastUsername;\n}\n\nfunction pad (param) {\n  var result = param.toString();\n  if (param < 10) result = '0' + result;\n  return result;\n}\n\nvar dt = new Date();\npayload.SubmitDate = \n  \tdt.getFullYear().toString()+\n  \tpad(dt.getMonth()+1)+\n  \tpad(dt.getDate());\n\nconsole.log(JSON.stringify(payload));\n\ncti.store.saveActionPayload = payload;\n\ndebugger;\nthis.$success();  \n"},{"name":"ScottCoOffline","type":"integration","item-type":"offline-api","_auto_id_":"41effe71-262e-442e-8ebb-2764c232e9d8","headers":{},"params":[],"operations":[{"ttlMinutes":120,"name":"saveaction","summary":"Save a completed action to the server","path":"saveaction","method":"POST","content-type":"application/json","params":[{"name":"payload","description":"Completed action details as captured by the user","type":"string","typeConfig":{},"in":"body"}]}],"url":"http://scottmdm02:8000/api/"},{"name":"fnConfirmSubmit","type":"scripting","item-type":"function","_auto_id_":"579ef94c-24b8-4fef-b830-cb2633496346","sync":false,"params":[],"content":"var popup = document.getElementById(\"popConfirmSubmit\");\nif (popup !== undefined && popup !== null)\n\tpopup.toggle();\n"},{"name":"fnSaveSettings","type":"scripting","item-type":"function","_auto_id_":"bd3b8cc1-3a36-4c46-b177-fdf75a3bef33","sync":true,"params":[],"content":"// Update the config options used by the app, if we have a valid API result\n\nif (cti.store.Config === undefined) { cti.store.Config = {}; }\n\nfunction clone(obj) {\n    if (null == obj || \"object\" != typeof obj) return obj;\n    var copy = obj.constructor();\n    for (var attr in obj) {\n        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n    }\n    return copy;\n}\nfunction validateEntry(field, entryTitle) {\n\tvar result = cti.store.pages && cti.store.pages.Settings && cti.store.pages.Settings[field];\n  if (!result) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please enter your \"+ (entryTitle || field) +\" name.\" });\n  }\n  return result;\n}\nfunction lookupEntry(field, lookupArray, entryTitle) {\n\tvar value = cti.store.pages.Settings[field].toLowerCase();\n  for (var i = 0; i < cti.store.Config[lookupArray].length; i++) {\n    if (cti.store.Config[lookupArray][i].label.toLowerCase() == value) {\n      return cti.store.Config[lookupArray][i].value;\n    }\n  }\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"User Unknown\", text: \"Please check the \"+ (entryTitle || field) +\" name as the one you entered was not found.\" });\n  return undefined;\n}\n\nif (!validateEntry('SheriffOfficer', 'Sheriff Officer') || !validateEntry('Witness')) {\n  this.$fail();\n  return false;\n}\n\nif (cti.store.pages.Settings.CompanyMode == undefined || cti.store.pages.Settings.CompanyMode.value == undefined) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please select the company you are acting for.\" });\n  this.$fail();\n  return false;\n}\n\nvar usingOldConfig = false;\nvar haveConfig = (cti.store.api.ScottCo !== undefined && cti.store.api.ScottCo.getconfig !== undefined && cti.store.api.ScottCo.getconfig.success);\n\nif (haveConfig) {\n  \t// TODO Clone the object instead of just referencing it\n\tcti.store.Config = clone(cti.store.api.ScottCo.getconfig.data);\n  \n\t// Clear the API result set\n\tdelete cti.store.api.ScottCo.getconfig;\n}\nelse if (cti.store.Config === undefined || cti.store.Config.fees === undefined) {\n  \t// If we dont have previous config to refer to, do not carry on\n\tcti.utils.callAction(\"show-notification\", { name: \"Warning\", title: \"Configuration Problem\", text: \"We were unable to get the latest configuration information, please try again.\" });\n  this.$fail();\n  return false;\n}\nelse {\n\tusingOldConfig = true;\n}\n\nfunction pad(value) {\n  if (value >= 10) { return value; } else { return '0' + value.toString(); }\n}\n\n// Validate the username that was entered (Sheriff officer)\nvar soNumber = lookupEntry('SheriffOfficer', 'sheriffOfficers', 'Sheriff Officer');\n\n// Validate the witness name\nvar witnessNumber = lookupEntry('Witness', 'witnesses');\n\nif (soNumber === undefined || witnessNumber === undefined) {\n  this.$fail();\n  return false;\n}\n\nif (usingOldConfig) {\n\tcti.utils.callAction(\"show-notification\", { name: \"Warning\", title: \"Configuration Problem\", text: \"We were unable to get the latest configuration information, some options may be unavailable.\" });\n}\n\n// Move back to the search page\ncti.store.Config.soNumber = soNumber;\ncti.store.Config.witnessNumber = witnessNumber;\ncti.store.Config.soName = cti.store.pages.Settings.SheriffOfficer;\ncti.store.Config.witnessName = cti.store.pages.Settings.Witness;\ncti.store.Config.company = cti.store.pages.Settings.CompanyMode.value;\ncti.store.Config.companyName = cti.store.pages.Settings.CompanyMode.label;\n\ncti.store.Config.DayList = [];\ncti.store.Config.MonthList = [];\ncti.store.Config.YearList = [];\ncti.store.Config.YearList2 = [];\nfor (var i = 1; i < 32; i++) {\n  cti.store.Config.DayList.push({ \"label\": i.toString(), \"value\": pad(i) });\n}\nvar dt = new Date();\nvar intialYear = dt.getFullYear()-17;\nfor (var i = intialYear; i > (intialYear-100); i--) {\n  cti.store.Config.YearList.push({ \"label\": i.toString(), \"value\": i });\n}\nintialYear = dt.getFullYear();\nfor (var i = intialYear; i > (intialYear-100); i--) {\n  cti.store.Config.YearList2.push({ \"label\": i.toString(), \"value\": i });\n}\ncti.store.Config.MonthList.push({ \"label\": \"January\", \"value\": \"01\" });\ncti.store.Config.MonthList.push({ \"label\": \"February\", \"value\": \"02\" });\ncti.store.Config.MonthList.push({ \"label\": \"March\", \"value\": \"03\" });\ncti.store.Config.MonthList.push({ \"label\": \"April\", \"value\": \"04\" });\ncti.store.Config.MonthList.push({ \"label\": \"May\", \"value\": \"05\" });\ncti.store.Config.MonthList.push({ \"label\": \"June\", \"value\": \"06\" });\ncti.store.Config.MonthList.push({ \"label\": \"July\", \"value\": \"07\" });\ncti.store.Config.MonthList.push({ \"label\": \"August\", \"value\": \"08\" });\ncti.store.Config.MonthList.push({ \"label\": \"September\", \"value\": \"09\" });\ncti.store.Config.MonthList.push({ \"label\": \"October\", \"value\": \"10\" });\ncti.store.Config.MonthList.push({ \"label\": \"November\", \"value\": \"11\" });\ncti.store.Config.MonthList.push({ \"label\": \"December\", \"value\": \"12\" });\n\ncti.store.Config.YesNoSelect = [{ \"label\": \"No\", \"value\": 0 }, { \"label\": \"Yes\", \"value\": 1 }];\n\ncti.utils.callAction(\"go-to-page\", {\"name\":\"SearchForAction\"});\nthis.$success();\n"},{"name":"fnVerifySaveAction","type":"scripting","item-type":"function","_auto_id_":"efbd83e6-c247-4d48-b4f2-422d3609f9f0","sync":true,"params":[],"content":"// This first trap should not fire as we'd already have picked up the failed API call - just for bulletproof-ness\nif (cti.store.api.ScottCo === undefined || cti.store.api.ScottCo.saveaction === undefined) {\n\tcti.utils.callAction('show-notification', { \n\t  name: \"Warning\", \n      title: \"Action could not be saved\", \n      text: \"We weren't able to communicate and save your completed action. Please check you have an internet connection or try again later.\" \n    });\n\tthis.$fail();\n  \treturn false;\n}\nelse if (!cti.store.api.ScottCo.saveaction.success) {\n\tcti.utils.callAction('show-notification', { \n\t  name: \"Warning\", \n      title: \"Action could not be saved\", \n      text: \"There was a problem when trying to save your action, please try again or contact your IT support.\" \n    });\n\tthis.$fail();\n  \treturn false;\n}\nelse {\n  \tif (cti.store.pages.SearchForAction !== undefined && cti.store.pages.SearchForAction.ActionId !== undefined) {\n      cti.store.pages.SearchForAction.ActionId = undefined;\n    }\n  \n\tcti.utils.callAction(\"go-to-page\", {\"name\":\"SubmitConfirmed\"});\n}\n"},{"name":"fnUpdateConfig","type":"scripting","item-type":"function","_auto_id_":"2a1bdc61-04a6-4569-a9f3-772380944518","sync":true,"params":[],"content":"// SHould be no way it's undefined here, but lets be safe\nif (cti.store.Config === undefined) { cti.store.Config = {}; }\n\n// The query will always give us the latest fee structure\ncti.store.Config.enforcementFees = cti.store.api.ScottCo.getconfig.enforcementFees;\ncti.store.Config.moCodes = cti.store.api.ScottCo.getconfig.moCodes;\ncti.store.Config.neReasons = cti.store.api.ScottCo.getconfig.neReasons;\n\nthis.$success();"},{"name":"fnValidateConfiguration","type":"scripting","item-type":"function","_auto_id_":"a0bc024f-d67d-41e8-af5a-cc0679fdd85d","sync":true,"params":[],"content":"var userEntered = \n    cti.store.pages.Configuration.Username !== undefined &&\n    cti.store.pages.Configuration.Username != '';\n\nif (!userEntered) {\n\tcti.utils.callAction(\"show-notification\", { name: \"Warning\", title: \"Information Missing\", text: \"Please enter your username.\" });\n  \treturn false;\n}\n\nif (cti.store.pages.Configuration.CompanyMode === undefined || cti.store.pages.Configuration.CompanyMode == null) {\n\tcti.utils.callAction(\"show-notification\", { name: \"Warning\", title: \"Information Missing\", text: \"Please select the company you are acting on behalf of.\" });\n  \treturn false;\n}\nvar needToAuthenticate =\n    cti.store.Config === undefined ||\n    cti.store.Config.lastUsername === undefined ||\n    cti.store.Config.lastUsername == '' ||\n    cti.store.pages.Configuration.Username.toLowerCase() != cti.store.Config.lastUsername.toLowerCase();\n\nfunction updateLocalConfig() {\n\tcti.store.Config.company = cti.store.pages.Configuration.CompanyMode.value;\n\tcti.store.Config.companyName = cti.store.pages.Configuration.CompanyMode.label;\n\tcti.utils.callAction(\"go-to-page\", {\"name\":\"SearchForAction\"});\n}\n\n//var url = 'http://scottmdm02:616/mdesign/a0A2000000jM0c0EAC/procs/cache.manifest';\nif (needToAuthenticate) {\n  \tdelete cti.store.Config;\n\tvar url = cti.store.schema.metadata.AuthUrl;\n    var username = cti.store.pages.Configuration.Username;\n    var password = cti.store.pages.Configuration.Password;\n    var cred = btoa(username+':'+password);\n    var request = new XMLHttpRequest();\n    request.onreadystatechange = function() {\n      \tif (request.readyState == 4) {\n        \tif (request.status == 200) {\n            \tif (cti.store.Config === undefined) { cti.store.Config = {}; }\n            \tdelete cti.store.pages.Configuration.Password;\n            \tcti.store.Config.lastUsername = cti.store.pages.Configuration.Username;\n\t\t\t\tupdateLocalConfig();\n            }\n        \telse {\n\t\t\t\tcti.utils.callAction(\"show-notification\", { name: \"Warning\", title: \"Login Failed\", text: \"Please check your username and password, then try again.\" });\n  \t\t\t\treturn false;\n            }\n        }\n    };\n    request.open('GET', url, true);\n    request.setRequestHeader('Authorization', 'Basic ' + cred);\n    request.send(null);\n}\nelse {\n\tupdateLocalConfig();\n}\n\n\n\n","actions":[]},{"name":"fnProcessExecuted","type":"scripting","item-type":"function","_auto_id_":"ce1fd6cc-9342-4dc7-b36d-d7e2d94e1b4e","sync":true,"params":[],"content":"if (cti.store.pages.ActionDetail.ModeOfService === undefined) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please choose the Mode of Service.\" });\n  \treturn false;\n}\nif (cti.store.pages.ActionDetail.DebtorAdvicePackLeft === undefined) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please select if a Debtor Advice Pack has been left.\" });\n  \treturn false;\n}\nif (cti.store.pages.ActionDetail.EnforcementFee === undefined) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please specify the Enforcement Fee as the Outcome is 'Executed'.\" });\n  \treturn false;\n}\nif (cti.store.pages.ActionDetail.ModeOfService.value === 'D' && !cti.store.pages.ActionDetail.ResidenceConfirmedBy) {\n\tcti.utils.callAction('show-notification', { name: \"Warning\", title: \"Information Missing\", text: \"Please enter the name of the person who confirmed residence\" });\n  \treturn false;\n}\ncti.utils.callAction(\"go-to-page\", {\"name\":\"ActionDetails2\"});"}],"components":[{"name":"ct_popup_box","description":"","icon":"fa-puzzle-piece","tagName":"ct-popup-box","type":"web-component","typeVersion":"1","format":"javascript","annotations":{"attributes":[{"name":"id","description":"","type":"string","enum":null,"required":true}],"functions":[{"name":"toggle","description":"Toggles the menu opened and closed based on the value\nof the this.opened property (initially set to false)","params":[{"name":"containerid","description":"id of container the popup is in","type":"string","enum":null,"required":true}],"returnType":"void","returnEnum":null}]},"_auto_id_":"c04df03e-20ca-4f06-815b-ed42ca534a76","valid":true,"files":{"original":"ct_popup_box.js","transpiled":"ct_popup_box.output.js"},"userConfig":{}}],"icondata":"scottco.png","hostContext":0,"minimumStudioVersion":"3.1.0","id":"381e143a-9717-4b08-a0b0-ed8cd0eebf5c","packageId":"com.commontime.scottco.Payments","lastSchemaUpgradeDate":"2017-04-21 08:27:30","jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiIzODFlMTQzYS05NzE3LTRiMDgtYTBiMC1lZDhjZDBlZWJmNWMiLCJhcHBfbmFtZSI6IlBheW1lbnRzIiwiYnVpbGRfaWQiOiI2ZjhiZDI2OS02ZWE2LTRlNmQtYTA2NC04Nzc1ZDU0OWU1N2QiLCJjbGllbnRfaWQiOiJlMThmMjFkYy0wNzQwLTQ2MDItYjFhNi0zZWEyNmY4NDc0MDciLCJjbGllbnRfc2VjcmV0IjoiVEdaNk1GZGhURFZ4U21KRFRUUkhiMVpEU0ZKaGR6MDkiLCJleHAiOjE1NDM0NDk2MDAsImZyZXF1ZW5jeSI6MjE2MDAwMDAwLCJoYXNoIjoiMDUxNjY4YmUwZWQzMmNjNDQ5MWY5YTRlMmZmOGNiOTY3YWU3MWE5NTMxNTQwMTZhYzcxOWRmNjM0NTEwMjM2ZiIsImxpY19leHAiOjE1NDA4NTc2MDAsImxwX2lkIjoiNTQwNWQ4ODUtM2Y0OC00NDU3LTg4ZTAtZjM2ODMxOTE3MjlhIiwicGFja2FnZV9pZCI6ImNvbS5jb21tb250aW1lLnNjb3R0Y28uUGF5bWVudHMiLCJyZWZyZXNoX3Rva2VuIjoiYW10WWN6WldiekIwZG1nM1VHMVJZa1JsYWtWS1ZGaFJhbGREZDNSSGVuVm9kakJvTVVKbGFHMDBORDA9IiwidHlwZSI6ImZ1bGwiLCJpYXQiOjE1MTAyOTgxMjZ9.ukNwGUzrYH5gfc5046vLEzPHtR0SeT0M6UwEv0mo7FNQHfNcO26wQ9ZkTa1vhzDQWgSWBevc1cl7DRe9e4HeVX6wNRmfMOGagd1VFXOxh32hdnADj_g0XKtUsbxTx34oREx8DSmmUZy_Wwd8s7KAztLr1Mgj2IWm6Xafih_FxXwqGqsuKwEOfCFv-EU58qy4MJ8vF1V4zL2-Nxw8uFBakxhuiGbOuTwQQZj9cEaCT3tQXa0A1DRFHWRK46nFEjbUOzDmivq_Uiws1GlrB8H80lau4wB7A6v_gB8lFK2KGYOqLinGaYUo5sbn6hxOFesDi1zypme1nfktXYIfPvaNkA","buildId":"6f8bd269-6ea6-4e6d-a064-8775d549e57d"}